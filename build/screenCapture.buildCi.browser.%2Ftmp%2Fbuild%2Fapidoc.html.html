<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/trentm/node-bunyan#readme">bunyan (v1.8.10)</a>
</h1>
<h4>a JSON logging library for node.js services</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan">module bunyan</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan">
            function <span class="apidocSignatureSpan"></span>bunyan
            <span class="apidocSignatureSpan">(options, _childOptions, _childSimple)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer">
            function <span class="apidocSignatureSpan">bunyan.</span>RingBuffer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream">
            function <span class="apidocSignatureSpan">bunyan.</span>RotatingFileStream
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.createLogger">
            function <span class="apidocSignatureSpan">bunyan.</span>createLogger
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.resolveLevel">
            function <span class="apidocSignatureSpan">bunyan.</span>resolveLevel
            <span class="apidocSignatureSpan">(nameOrNum)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.safeCycles">
            function <span class="apidocSignatureSpan">bunyan.</span>safeCycles
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.super_">
            function <span class="apidocSignatureSpan">bunyan.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>DEBUG</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>ERROR</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>FATAL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>INFO</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>LOG_VERSION</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>TRACE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.</span>WARN</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.</span>RingBuffer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.</span>RotatingFileStream.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.</span>bunyan.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.</span>levelFromName</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.</span>nameFromLevel</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.</span>stdSerializers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">bunyan.</span>VERSION</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.RingBuffer">module bunyan.RingBuffer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer.RingBuffer">
            function <span class="apidocSignatureSpan">bunyan.</span>RingBuffer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer.super_">
            function <span class="apidocSignatureSpan">bunyan.RingBuffer.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.RingBuffer.prototype">module bunyan.RingBuffer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer.prototype.destroy">
            function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer.prototype.destroySoon">
            function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>destroySoon
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer.prototype.end">
            function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RingBuffer.prototype.write">
            function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>write
            <span class="apidocSignatureSpan">(record)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.RotatingFileStream">module bunyan.RotatingFileStream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.RotatingFileStream">
            function <span class="apidocSignatureSpan">bunyan.</span>RotatingFileStream
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.super_">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.RotatingFileStream.prototype">module bunyan.RotatingFileStream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype._calcRotTime">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_calcRotTime
            <span class="apidocSignatureSpan">(periodOffset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype._debug">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_debug
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype._setRotationTimer">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_setRotationTimer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype._setupNextRot">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_setupNextRot
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype.destroy">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>destroy
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype.destroySoon">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>destroySoon
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype.end">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>end
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype.rotate">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>rotate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.RotatingFileStream.prototype.write">
            function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>write
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.bunyan">module bunyan.bunyan</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.bunyan">
            function <span class="apidocSignatureSpan">bunyan.</span>bunyan
            <span class="apidocSignatureSpan">(options, _childOptions, _childSimple)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.RingBuffer">
            function <span class="apidocSignatureSpan">bunyan.bunyan.</span>RingBuffer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.RotatingFileStream">
            function <span class="apidocSignatureSpan">bunyan.bunyan.</span>RotatingFileStream
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.createLogger">
            function <span class="apidocSignatureSpan">bunyan.bunyan.</span>createLogger
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.resolveLevel">
            function <span class="apidocSignatureSpan">bunyan.bunyan.</span>resolveLevel
            <span class="apidocSignatureSpan">(nameOrNum)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.safeCycles">
            function <span class="apidocSignatureSpan">bunyan.bunyan.</span>safeCycles
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.super_">
            function <span class="apidocSignatureSpan">bunyan.bunyan.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>DEBUG</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>ERROR</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>FATAL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>INFO</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>LOG_VERSION</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>TRACE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">bunyan.bunyan.</span>WARN</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.bunyan.</span>levelFromName</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.bunyan.</span>nameFromLevel</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">bunyan.bunyan.</span>stdSerializers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">bunyan.bunyan.</span>VERSION</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.bunyan.prototype">module bunyan.bunyan.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype._applySerializers">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>_applySerializers
            <span class="apidocSignatureSpan">(fields, excludeFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype._emit">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>_emit
            <span class="apidocSignatureSpan">(rec, noemit)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.addSerializers">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>addSerializers
            <span class="apidocSignatureSpan">(serializers)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.addStream">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>addStream
            <span class="apidocSignatureSpan">(s, defaultLevel)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.child">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>child
            <span class="apidocSignatureSpan">(options, simple)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.debug">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>debug
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.error">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>error
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.fatal">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>fatal
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.info">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>info
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.level">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>level
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.levels">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>levels
            <span class="apidocSignatureSpan">(name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.reopenFileStreams">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>reopenFileStreams
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.trace">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>trace
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.bunyan.prototype.warn">
            function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>warn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.bunyan.stdSerializers">module bunyan.stdSerializers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.stdSerializers.err">
            function <span class="apidocSignatureSpan">bunyan.stdSerializers.</span>err
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.stdSerializers.req">
            function <span class="apidocSignatureSpan">bunyan.stdSerializers.</span>req
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.bunyan.stdSerializers.res">
            function <span class="apidocSignatureSpan">bunyan.stdSerializers.</span>res
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan" id="apidoc.module.bunyan">module bunyan</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.bunyan" id="apidoc.element.bunyan.bunyan">
        function <span class="apidocSignatureSpan"></span>bunyan
        <span class="apidocSignatureSpan">(options, _childOptions, _childSimple)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Logger(options, _childOptions, _childSimple) {
    xxx('Logger start:', options)
    if (!(this instanceof Logger)) {
        return new Logger(options, _childOptions);
    }

    // Input arg validation.
    var parent;
    if (_childOptions !== undefined) {
        parent = options;
        options = _childOptions;
        if (!(parent instanceof Logger)) {
            throw new TypeError(
                'invalid Logger creation: do not pass a second arg');
        }
    }
    if (!options) {
        throw new TypeError('options (object) is required');
    }
    if (!parent) {
        if (!options.name) {
            throw new TypeError('options.name (string) is required');
        }
    } else {
        if (options.name) {
            throw new TypeError(
                'invalid options.name: child cannot set logger name');
        }
    }
    if (options.stream &amp;&amp; options.streams) {
        throw new TypeError('cannot mix "streams" and "stream" options');
    }
    if (options.streams &amp;&amp; !Array.isArray(options.streams)) {
        throw new TypeError('invalid options.streams: must be an array')
    }
    if (options.serializers &amp;&amp; (typeof (options.serializers) !== 'object' ||
            Array.isArray(options.serializers))) {
        throw new TypeError('invalid options.serializers: must be an object')
    }

    EventEmitter.call(this);

    // Fast path for simple child creation.
    if (parent &amp;&amp; _childSimple) {
        // `_isSimpleChild` is a signal to stream close handling that this child
        // owns none of its streams.
        this._isSimpleChild = true;

        this._level = parent._level;
        this.streams = parent.streams;
        this.serializers = parent.serializers;
        this.src = parent.src;
        var fields = this.fields = {};
        var parentFieldNames = Object.keys(parent.fields);
        for (var i = 0; i &lt; parentFieldNames.length; i++) {
            var name = parentFieldNames[i];
            fields[name] = parent.fields[name];
        }
        var names = Object.keys(options);
        for (var i = 0; i &lt; names.length; i++) {
            var name = names[i];
            fields[name] = options[name];
        }
        return;
    }

    // Start values.
    var self = this;
    if (parent) {
        this._level = parent._level;
        this.streams = [];
        for (var i = 0; i &lt; parent.streams.length; i++) {
            var s = objCopy(parent.streams[i]);
            s.closeOnExit = false; // Don't own parent stream.
            this.streams.push(s);
        }
        this.serializers = objCopy(parent.serializers);
        this.src = parent.src;
        this.fields = objCopy(parent.fields);
        if (options.level) {
            this.level(options.level);
        }
    } else {
        this._level = Number.POSITIVE_INFINITY;
        this.streams = [];
        this.serializers = null;
        this.src = false;
        this.fields = {};
    }

    if (!dtp &amp;&amp; dtrace) {
        dtp = dtrace.createDTraceProvider('bunyan');

        for (var level in levelFromName) {
            var probe;

            probes[levelFromName[level]] = probe =
                dtp.addProbe('log-' + level, 'char *');

            // Explicitly add a reference to dtp to prevent it from being GC'd
            probe.dtp = dtp;
        }

        dtp.enable();
    }

    // Handle *config* options (i.e. options that are not just plain data
    // for log records).
    if (options.stream) {
        self.addStream({
            type: 'stream',
            stream: options.stream,
            closeOnExit: false,
            level: options.level
        });
    } else if (options.streams) {
        options.streams.forEach(function (s) {
            self.addStream(s, options.level);
        });
    } else if (parent &amp;&amp; options.level) {
        this.level(options.level);
    } else if (!parent) {
        if (runtimeEnv === 'browser') {
            /*
             * In the browser we'll be emitting to console.log by default.
             * Any console.log worth its salt these days can nicely render ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer" id="apidoc.element.bunyan.RingBuffer">
        function <span class="apidocSignatureSpan">bunyan.</span>RingBuffer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RingBuffer(options) {
    this.limit = options &amp;&amp; options.limit ? options.limit : 100;
    this.writable = true;
    this.records = [];
    EventEmitter.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
own HTTP interface, or a post-mortem facility like MDB or node-panic.

To use a RingBuffer:

```js
/* Create a ring buffer that stores the last 100 records. */
var bunyan = require('bunyan');
var ringbuffer = new bunyan.<span class="apidocCodeKeywordSpan">RingBuffer</span>({ limit: 100 });
var log = bunyan.createLogger({
name: 'foo',
streams: [
    {
        level: 'info',
        stream: process.stdout
    },
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream" id="apidoc.element.bunyan.RotatingFileStream">
        function <span class="apidocSignatureSpan">bunyan.</span>RotatingFileStream
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RotatingFileStream(options) {
    this.path = options.path;

    this.count = (options.count == null ? 10 : options.count);
    assert.equal(typeof (this.count), 'number',
        format('rotating-file stream "count" is not a number: %j (%s) in %j',
            this.count, typeof (this.count), this));
    assert.ok(this.count &gt;= 0,
        format('rotating-file stream "count" is not &gt;= 0: %j in %j',
            this.count, this));

    // Parse `options.period`.
    if (options.period) {
        // &lt;number&gt;&lt;scope&gt; where scope is:
        //    h   hours (at the start of the hour)
        //    d   days (at the start of the day, i.e. just after midnight)
        //    w   weeks (at the start of Sunday)
        //    m   months (on the first of the month)
        //    y   years (at the start of Jan 1st)
        // with special values 'hourly' (1h), 'daily' (1d), "weekly" (1w),
        // 'monthly' (1m) and 'yearly' (1y)
        var period = {
            'hourly': '1h',
            'daily': '1d',
            'weekly': '1w',
            'monthly': '1m',
            'yearly': '1y'
        }[options.period] || options.period;
        var m = /^([1-9][0-9]*)([hdwmy]|ms)$/.exec(period);
        if (!m) {
            throw new Error(format('invalid period: "%s"', options.period));
        }
        this.periodNum = Number(m[1]);
        this.periodScope = m[2];
    } else {
        this.periodNum = 1;
        this.periodScope = 'd';
    }

    var lastModified = null;
    try {
        var fileInfo = fs.statSync(this.path);
        lastModified = fileInfo.mtime.getTime();
    }
    catch (err) {
        // file doesn't exist
    }
    var rotateAfterOpen = false;
    if (lastModified) {
        var lastRotTime = this._calcRotTime(0);
        if (lastModified &lt; lastRotTime) {
            rotateAfterOpen = true;
        }
    }

    // TODO: template support for backup files
    // template: &lt;path to which to rotate&gt;
    //      default is %P.%n
    //      '/var/log/archive/foo.log'  -&gt; foo.log.%n
    //      '/var/log/archive/foo.log.%n'
    //      codes:
    //          XXX support strftime codes (per node version of those)
    //              or whatever module. Pick non-colliding for extra
    //              codes
    //          %P      `path` base value
    //          %n      integer number of rotated log (1,2,3,...)
    //          %d      datetime in YYYY-MM-DD_HH-MM-SS
    //                      XXX what should default date format be?
    //                          prior art? Want to avoid ':' in
    //                          filenames (illegal on Windows for one).

    this.stream = fs.createWriteStream(this.path,
        {flags: 'a', encoding: 'utf8'});

    this.rotQueue = [];
    this.rotating = false;
    if (rotateAfterOpen) {
        this._debug('rotateAfterOpen -&gt; call rotate()');
        this.rotate();
    } else {
        this._setupNextRot();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.createLogger" id="apidoc.element.bunyan.createLogger">
        function <span class="apidocSignatureSpan">bunyan.</span>createLogger
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createLogger(options) {
    return new Logger(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[![npm version](https://img.shields.io/npm/v/bunyan.svg?style=flat)](https://www.npmjs.com/package/bunyan)
[![Build Status](https://travis-ci.org/trentm/node-bunyan.svg?branch=master)](https://travis-ci.org/trentm/node-bunyan)

Bunyan is **a simple and fast JSON logging library** for node.js services:

```js
var bunyan = require('bunyan');
var log = bunyan.<span class="apidocCodeKeywordSpan">createLogger</span>({name: "myapp"});
log.info("hi");
```

and **a `bunyan` CLI tool** for nicely viewing those logs:

![bunyan CLI screenshot](https://raw.github.com/trentm/node-bunyan/master/tools/screenshot1.png)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.resolveLevel" id="apidoc.element.bunyan.resolveLevel">
        function <span class="apidocSignatureSpan">bunyan.</span>resolveLevel
        <span class="apidocSignatureSpan">(nameOrNum)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function resolveLevel(nameOrNum) {
    var level;
    var type = typeof (nameOrNum);
    if (type === 'string') {
        level = levelFromName[nameOrNum.toLowerCase()];
        if (!level) {
            throw new Error(format('unknown level name: "%s"', nameOrNum));
        }
    } else if (type !== 'number') {
        throw new TypeError(format('cannot resolve level: invalid arg (%s):',
            type, nameOrNum));
    } else if (nameOrNum &lt; 0 || Math.floor(nameOrNum) !== nameOrNum) {
        throw new TypeError(format('level is not a positive integer: %s',
            nameOrNum));
    } else {
        level = nameOrNum;
    }
    return level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.safeCycles" id="apidoc.element.bunyan.safeCycles">
        function <span class="apidocSignatureSpan">bunyan.</span>safeCycles
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function safeCyclesSet() {
    var seen = new Set();
    return function (key, val) {
        if (!val || typeof (val) !== 'object') {
            return val;
        }
        if (seen.has(val)) {
            return '[Circular]';
        }
        seen.add(val);
        return val;
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.super_" id="apidoc.element.bunyan.super_">
        function <span class="apidocSignatureSpan">bunyan.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.RingBuffer" id="apidoc.module.bunyan.RingBuffer">module bunyan.RingBuffer</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer.RingBuffer" id="apidoc.element.bunyan.RingBuffer.RingBuffer">
        function <span class="apidocSignatureSpan">bunyan.</span>RingBuffer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RingBuffer(options) {
    this.limit = options &amp;&amp; options.limit ? options.limit : 100;
    this.writable = true;
    this.records = [];
    EventEmitter.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
own HTTP interface, or a post-mortem facility like MDB or node-panic.

To use a RingBuffer:

```js
/* Create a ring buffer that stores the last 100 records. */
var bunyan = require('bunyan');
var ringbuffer = new bunyan.<span class="apidocCodeKeywordSpan">RingBuffer</span>({ limit: 100 });
var log = bunyan.createLogger({
name: 'foo',
streams: [
    {
        level: 'info',
        stream: process.stdout
    },
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer.super_" id="apidoc.element.bunyan.RingBuffer.super_">
        function <span class="apidocSignatureSpan">bunyan.RingBuffer.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.RingBuffer.prototype" id="apidoc.module.bunyan.RingBuffer.prototype">module bunyan.RingBuffer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer.prototype.destroy" id="apidoc.element.bunyan.RingBuffer.prototype.destroy">
        function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
    this.writable = false;
    this.emit('close');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer.prototype.destroySoon" id="apidoc.element.bunyan.RingBuffer.prototype.destroySoon">
        function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>destroySoon
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroySoon = function () {
    this.destroy();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer.prototype.end" id="apidoc.element.bunyan.RingBuffer.prototype.end">
        function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
    if (arguments.length &gt; 0)
        this.write.apply(this, Array.prototype.slice.call(arguments));
    this.writable = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RingBuffer.prototype.write" id="apidoc.element.bunyan.RingBuffer.prototype.write">
        function <span class="apidocSignatureSpan">bunyan.RingBuffer.prototype.</span>write
        <span class="apidocSignatureSpan">(record)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (record) {
    if (!this.writable)
        throw (new Error('RingBuffer has been ended already'));

    this.records.push(record);

    if (this.records.length &gt; this.limit)
        this.records.shift();

    return (true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.RotatingFileStream" id="apidoc.module.bunyan.RotatingFileStream">module bunyan.RotatingFileStream</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.RotatingFileStream" id="apidoc.element.bunyan.RotatingFileStream.RotatingFileStream">
        function <span class="apidocSignatureSpan">bunyan.</span>RotatingFileStream
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RotatingFileStream(options) {
    this.path = options.path;

    this.count = (options.count == null ? 10 : options.count);
    assert.equal(typeof (this.count), 'number',
        format('rotating-file stream "count" is not a number: %j (%s) in %j',
            this.count, typeof (this.count), this));
    assert.ok(this.count &gt;= 0,
        format('rotating-file stream "count" is not &gt;= 0: %j in %j',
            this.count, this));

    // Parse `options.period`.
    if (options.period) {
        // &lt;number&gt;&lt;scope&gt; where scope is:
        //    h   hours (at the start of the hour)
        //    d   days (at the start of the day, i.e. just after midnight)
        //    w   weeks (at the start of Sunday)
        //    m   months (on the first of the month)
        //    y   years (at the start of Jan 1st)
        // with special values 'hourly' (1h), 'daily' (1d), "weekly" (1w),
        // 'monthly' (1m) and 'yearly' (1y)
        var period = {
            'hourly': '1h',
            'daily': '1d',
            'weekly': '1w',
            'monthly': '1m',
            'yearly': '1y'
        }[options.period] || options.period;
        var m = /^([1-9][0-9]*)([hdwmy]|ms)$/.exec(period);
        if (!m) {
            throw new Error(format('invalid period: "%s"', options.period));
        }
        this.periodNum = Number(m[1]);
        this.periodScope = m[2];
    } else {
        this.periodNum = 1;
        this.periodScope = 'd';
    }

    var lastModified = null;
    try {
        var fileInfo = fs.statSync(this.path);
        lastModified = fileInfo.mtime.getTime();
    }
    catch (err) {
        // file doesn't exist
    }
    var rotateAfterOpen = false;
    if (lastModified) {
        var lastRotTime = this._calcRotTime(0);
        if (lastModified &lt; lastRotTime) {
            rotateAfterOpen = true;
        }
    }

    // TODO: template support for backup files
    // template: &lt;path to which to rotate&gt;
    //      default is %P.%n
    //      '/var/log/archive/foo.log'  -&gt; foo.log.%n
    //      '/var/log/archive/foo.log.%n'
    //      codes:
    //          XXX support strftime codes (per node version of those)
    //              or whatever module. Pick non-colliding for extra
    //              codes
    //          %P      `path` base value
    //          %n      integer number of rotated log (1,2,3,...)
    //          %d      datetime in YYYY-MM-DD_HH-MM-SS
    //                      XXX what should default date format be?
    //                          prior art? Want to avoid ':' in
    //                          filenames (illegal on Windows for one).

    this.stream = fs.createWriteStream(this.path,
        {flags: 'a', encoding: 'utf8'});

    this.rotQueue = [];
    this.rotating = false;
    if (rotateAfterOpen) {
        this._debug('rotateAfterOpen -&gt; call rotate()');
        this.rotate();
    } else {
        this._setupNextRot();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.super_" id="apidoc.element.bunyan.RotatingFileStream.super_">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.RotatingFileStream.prototype" id="apidoc.module.bunyan.RotatingFileStream.prototype">module bunyan.RotatingFileStream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype._calcRotTime" id="apidoc.element.bunyan.RotatingFileStream.prototype._calcRotTime">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_calcRotTime
        <span class="apidocSignatureSpan">(periodOffset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _calcRotTime(periodOffset) {
    this._debug('_calcRotTime: %s%s', this.periodNum, this.periodScope);
    var d = new Date();

    this._debug('  now local: %s', d);
    this._debug('    now utc: %s', d.toISOString());
    var rotAt;
    switch (this.periodScope) {
    case 'ms':
        // Hidden millisecond period for debugging.
        if (this.rotAt) {
            rotAt = this.rotAt + this.periodNum * periodOffset;
        } else {
            rotAt = Date.now() + this.periodNum * periodOffset;
        }
        break;
    case 'h':
        if (this.rotAt) {
            rotAt = this.rotAt + this.periodNum * 60 * 60 * 1000 * periodOffset;
        } else {
            // First time: top of the next hour.
            rotAt = Date.UTC(d.getUTCFullYear(), d.getUTCMonth(),
                d.getUTCDate(), d.getUTCHours() + periodOffset);
        }
        break;
    case 'd':
        if (this.rotAt) {
            rotAt = this.rotAt + this.periodNum * 24 * 60 * 60 * 1000
                * periodOffset;
        } else {
            // First time: start of tomorrow (i.e. at the coming midnight) UTC.
            rotAt = Date.UTC(d.getUTCFullYear(), d.getUTCMonth(),
                d.getUTCDate() + periodOffset);
        }
        break;
    case 'w':
        // Currently, always on Sunday morning at 00:00:00 (UTC).
        if (this.rotAt) {
            rotAt = this.rotAt + this.periodNum * 7 * 24 * 60 * 60 * 1000
                * periodOffset;
        } else {
            // First time: this coming Sunday.
            var dayOffset = (7 - d.getUTCDay());
            if (periodOffset &lt; 1) {
                dayOffset = -d.getUTCDay();
            }
            if (periodOffset &gt; 1 || periodOffset &lt; -1) {
                dayOffset += 7 * periodOffset;
            }
            rotAt = Date.UTC(d.getUTCFullYear(), d.getUTCMonth(),
                d.getUTCDate() + dayOffset);
        }
        break;
    case 'm':
        if (this.rotAt) {
            rotAt = Date.UTC(d.getUTCFullYear(),
                d.getUTCMonth() + this.periodNum * periodOffset, 1);
        } else {
            // First time: the start of the next month.
            rotAt = Date.UTC(d.getUTCFullYear(),
                d.getUTCMonth() + periodOffset, 1);
        }
        break;
    case 'y':
        if (this.rotAt) {
            rotAt = Date.UTC(d.getUTCFullYear() + this.periodNum * periodOffset,
                0, 1);
        } else {
            // First time: the start of the next year.
            rotAt = Date.UTC(d.getUTCFullYear() + periodOffset, 0, 1);
        }
        break;
    default:
        assert.fail(format('invalid period scope: "%s"', this.periodScope));
    }

    if (this._debug()) {
        this._debug('  **rotAt**: %s (utc: %s)', rotAt,
            new Date(rotAt).toUTCString());
        var now = Date.now();
        this._debug('        now: %s (%sms == %smin == %sh to go)',
            now,
            rotAt - now,
            (rotAt-now)/1000/60,
            (rotAt-now)/1000/60/60);
    }
    return rotAt;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype._debug" id="apidoc.element.bunyan.RotatingFileStream.prototype._debug">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_debug
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_debug = function () {
    // Set this to `true` to add debug logging.
    if (false) {
        if (arguments.length === 0) {
            return true;
        }
        var args = Array.prototype.slice.call(arguments);
        args[0] = '[' + (new Date().toISOString()) + ', '
            + this.path + '] ' + args[0];
        console.log.apply(this, args);
    } else {
        return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype._setRotationTimer" id="apidoc.element.bunyan.RotatingFileStream.prototype._setRotationTimer">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_setRotationTimer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setRotationTimer = function () {
    var self = this;
    var delay = this.rotAt - Date.now();
    // Cap timeout to Node's max setTimeout, see
    // &lt;https://github.com/joyent/node/issues/8656&gt;.
    var TIMEOUT_MAX = 2147483647; // 2^31-1
    if (delay &gt; TIMEOUT_MAX) {
        delay = TIMEOUT_MAX;
    }
    this.timeout = setTimeout(
        function () {
            self._debug('_setRotationTimer timeout -&gt; call rotate()');
            self.rotate();
        },
        delay);
    if (typeof (this.timeout.unref) === 'function') {
        this.timeout.unref();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype._setupNextRot" id="apidoc.element.bunyan.RotatingFileStream.prototype._setupNextRot">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>_setupNextRot
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_setupNextRot = function () {
    this.rotAt = this._calcRotTime(1);
    this._setRotationTimer();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype.destroy" id="apidoc.element.bunyan.RotatingFileStream.prototype.destroy">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>destroy
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroy(s) {
    this.stream.destroy();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype.destroySoon" id="apidoc.element.bunyan.RotatingFileStream.prototype.destroySoon">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>destroySoon
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroySoon(s) {
    this.stream.destroySoon();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype.end" id="apidoc.element.bunyan.RotatingFileStream.prototype.end">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>end
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(s) {
    this.stream.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype.rotate" id="apidoc.element.bunyan.RotatingFileStream.prototype.rotate">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>rotate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rotate() {
    // XXX What about shutdown?
    var self = this;

    // If rotation period is &gt; ~25 days, we have to break into multiple
    // setTimeout's. See &lt;https://github.com/joyent/node/issues/8656&gt;.
    if (self.rotAt &amp;&amp; self.rotAt &gt; Date.now()) {
        return self._setRotationTimer();
    }

    this._debug('rotate');
    if (self.rotating) {
        throw new TypeError('cannot start a rotation when already rotating');
    }
    self.rotating = true;

    self.stream.end();  // XXX can do moves sync after this? test at high rate

    function del() {
        var toDel = self.path + '.' + String(n - 1);
        if (n === 0) {
            toDel = self.path;
        }
        n -= 1;
        self._debug('  rm %s', toDel);
        fs.unlink(toDel, function (delErr) {
            //XXX handle err other than not exists
            moves();
        });
    }

    function moves() {
        if (self.count === 0 || n &lt; 0) {
            return finish();
        }
        var before = self.path;
        var after = self.path + '.' + String(n);
        if (n &gt; 0) {
            before += '.' + String(n - 1);
        }
        n -= 1;
        fs.exists(before, function (exists) {
            if (!exists) {
                moves();
            } else {
                self._debug('  mv %s %s', before, after);
                mv(before, after, function (mvErr) {
                    if (mvErr) {
                        self.emit('error', mvErr);
                        finish(); // XXX finish here?
                    } else {
                        moves();
                    }
                });
            }
        })
    }

    function finish() {
        self._debug('  open %s', self.path);
        self.stream = fs.createWriteStream(self.path,
            {flags: 'a', encoding: 'utf8'});
        var q = self.rotQueue, len = q.length;
        for (var i = 0; i &lt; len; i++) {
            self.stream.write(q[i]);
        }
        self.rotQueue = [];
        self.rotating = false;
        self.emit('drain');
        self._setupNextRot();
    }

    var n = this.count;
    del();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.RotatingFileStream.prototype.write" id="apidoc.element.bunyan.RotatingFileStream.prototype.write">
        function <span class="apidocSignatureSpan">bunyan.RotatingFileStream.prototype.</span>write
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function write(s) {
    if (this.rotating) {
        this.rotQueue.push(s);
        return false;
    } else {
        return this.stream.write(s);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.bunyan" id="apidoc.module.bunyan.bunyan">module bunyan.bunyan</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.bunyan.bunyan" id="apidoc.element.bunyan.bunyan.bunyan">
        function <span class="apidocSignatureSpan">bunyan.</span>bunyan
        <span class="apidocSignatureSpan">(options, _childOptions, _childSimple)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Logger(options, _childOptions, _childSimple) {
    xxx('Logger start:', options)
    if (!(this instanceof Logger)) {
        return new Logger(options, _childOptions);
    }

    // Input arg validation.
    var parent;
    if (_childOptions !== undefined) {
        parent = options;
        options = _childOptions;
        if (!(parent instanceof Logger)) {
            throw new TypeError(
                'invalid Logger creation: do not pass a second arg');
        }
    }
    if (!options) {
        throw new TypeError('options (object) is required');
    }
    if (!parent) {
        if (!options.name) {
            throw new TypeError('options.name (string) is required');
        }
    } else {
        if (options.name) {
            throw new TypeError(
                'invalid options.name: child cannot set logger name');
        }
    }
    if (options.stream &amp;&amp; options.streams) {
        throw new TypeError('cannot mix "streams" and "stream" options');
    }
    if (options.streams &amp;&amp; !Array.isArray(options.streams)) {
        throw new TypeError('invalid options.streams: must be an array')
    }
    if (options.serializers &amp;&amp; (typeof (options.serializers) !== 'object' ||
            Array.isArray(options.serializers))) {
        throw new TypeError('invalid options.serializers: must be an object')
    }

    EventEmitter.call(this);

    // Fast path for simple child creation.
    if (parent &amp;&amp; _childSimple) {
        // `_isSimpleChild` is a signal to stream close handling that this child
        // owns none of its streams.
        this._isSimpleChild = true;

        this._level = parent._level;
        this.streams = parent.streams;
        this.serializers = parent.serializers;
        this.src = parent.src;
        var fields = this.fields = {};
        var parentFieldNames = Object.keys(parent.fields);
        for (var i = 0; i &lt; parentFieldNames.length; i++) {
            var name = parentFieldNames[i];
            fields[name] = parent.fields[name];
        }
        var names = Object.keys(options);
        for (var i = 0; i &lt; names.length; i++) {
            var name = names[i];
            fields[name] = options[name];
        }
        return;
    }

    // Start values.
    var self = this;
    if (parent) {
        this._level = parent._level;
        this.streams = [];
        for (var i = 0; i &lt; parent.streams.length; i++) {
            var s = objCopy(parent.streams[i]);
            s.closeOnExit = false; // Don't own parent stream.
            this.streams.push(s);
        }
        this.serializers = objCopy(parent.serializers);
        this.src = parent.src;
        this.fields = objCopy(parent.fields);
        if (options.level) {
            this.level(options.level);
        }
    } else {
        this._level = Number.POSITIVE_INFINITY;
        this.streams = [];
        this.serializers = null;
        this.src = false;
        this.fields = {};
    }

    if (!dtp &amp;&amp; dtrace) {
        dtp = dtrace.createDTraceProvider('bunyan');

        for (var level in levelFromName) {
            var probe;

            probes[levelFromName[level]] = probe =
                dtp.addProbe('log-' + level, 'char *');

            // Explicitly add a reference to dtp to prevent it from being GC'd
            probe.dtp = dtp;
        }

        dtp.enable();
    }

    // Handle *config* options (i.e. options that are not just plain data
    // for log records).
    if (options.stream) {
        self.addStream({
            type: 'stream',
            stream: options.stream,
            closeOnExit: false,
            level: options.level
        });
    } else if (options.streams) {
        options.streams.forEach(function (s) {
            self.addStream(s, options.level);
        });
    } else if (parent &amp;&amp; options.level) {
        this.level(options.level);
    } else if (!parent) {
        if (runtimeEnv === 'browser') {
            /*
             * In the browser we'll be emitting to console.log by default.
             * Any console.log worth its salt these days can nicely render ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.RingBuffer" id="apidoc.element.bunyan.bunyan.RingBuffer">
        function <span class="apidocSignatureSpan">bunyan.bunyan.</span>RingBuffer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RingBuffer(options) {
    this.limit = options &amp;&amp; options.limit ? options.limit : 100;
    this.writable = true;
    this.records = [];
    EventEmitter.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
own HTTP interface, or a post-mortem facility like MDB or node-panic.

To use a RingBuffer:

```js
/* Create a ring buffer that stores the last 100 records. */
var bunyan = require('bunyan');
var ringbuffer = new bunyan.<span class="apidocCodeKeywordSpan">RingBuffer</span>({ limit: 100 });
var log = bunyan.createLogger({
name: 'foo',
streams: [
    {
        level: 'info',
        stream: process.stdout
    },
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.RotatingFileStream" id="apidoc.element.bunyan.bunyan.RotatingFileStream">
        function <span class="apidocSignatureSpan">bunyan.bunyan.</span>RotatingFileStream
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RotatingFileStream(options) {
    this.path = options.path;

    this.count = (options.count == null ? 10 : options.count);
    assert.equal(typeof (this.count), 'number',
        format('rotating-file stream "count" is not a number: %j (%s) in %j',
            this.count, typeof (this.count), this));
    assert.ok(this.count &gt;= 0,
        format('rotating-file stream "count" is not &gt;= 0: %j in %j',
            this.count, this));

    // Parse `options.period`.
    if (options.period) {
        // &lt;number&gt;&lt;scope&gt; where scope is:
        //    h   hours (at the start of the hour)
        //    d   days (at the start of the day, i.e. just after midnight)
        //    w   weeks (at the start of Sunday)
        //    m   months (on the first of the month)
        //    y   years (at the start of Jan 1st)
        // with special values 'hourly' (1h), 'daily' (1d), "weekly" (1w),
        // 'monthly' (1m) and 'yearly' (1y)
        var period = {
            'hourly': '1h',
            'daily': '1d',
            'weekly': '1w',
            'monthly': '1m',
            'yearly': '1y'
        }[options.period] || options.period;
        var m = /^([1-9][0-9]*)([hdwmy]|ms)$/.exec(period);
        if (!m) {
            throw new Error(format('invalid period: "%s"', options.period));
        }
        this.periodNum = Number(m[1]);
        this.periodScope = m[2];
    } else {
        this.periodNum = 1;
        this.periodScope = 'd';
    }

    var lastModified = null;
    try {
        var fileInfo = fs.statSync(this.path);
        lastModified = fileInfo.mtime.getTime();
    }
    catch (err) {
        // file doesn't exist
    }
    var rotateAfterOpen = false;
    if (lastModified) {
        var lastRotTime = this._calcRotTime(0);
        if (lastModified &lt; lastRotTime) {
            rotateAfterOpen = true;
        }
    }

    // TODO: template support for backup files
    // template: &lt;path to which to rotate&gt;
    //      default is %P.%n
    //      '/var/log/archive/foo.log'  -&gt; foo.log.%n
    //      '/var/log/archive/foo.log.%n'
    //      codes:
    //          XXX support strftime codes (per node version of those)
    //              or whatever module. Pick non-colliding for extra
    //              codes
    //          %P      `path` base value
    //          %n      integer number of rotated log (1,2,3,...)
    //          %d      datetime in YYYY-MM-DD_HH-MM-SS
    //                      XXX what should default date format be?
    //                          prior art? Want to avoid ':' in
    //                          filenames (illegal on Windows for one).

    this.stream = fs.createWriteStream(this.path,
        {flags: 'a', encoding: 'utf8'});

    this.rotQueue = [];
    this.rotating = false;
    if (rotateAfterOpen) {
        this._debug('rotateAfterOpen -&gt; call rotate()');
        this.rotate();
    } else {
        this._setupNextRot();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.createLogger" id="apidoc.element.bunyan.bunyan.createLogger">
        function <span class="apidocSignatureSpan">bunyan.bunyan.</span>createLogger
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createLogger(options) {
    return new Logger(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[![npm version](https://img.shields.io/npm/v/bunyan.svg?style=flat)](https://www.npmjs.com/package/bunyan)
[![Build Status](https://travis-ci.org/trentm/node-bunyan.svg?branch=master)](https://travis-ci.org/trentm/node-bunyan)

Bunyan is **a simple and fast JSON logging library** for node.js services:

```js
var bunyan = require('bunyan');
var log = bunyan.<span class="apidocCodeKeywordSpan">createLogger</span>({name: "myapp"});
log.info("hi");
```

and **a `bunyan` CLI tool** for nicely viewing those logs:

![bunyan CLI screenshot](https://raw.github.com/trentm/node-bunyan/master/tools/screenshot1.png)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.resolveLevel" id="apidoc.element.bunyan.bunyan.resolveLevel">
        function <span class="apidocSignatureSpan">bunyan.bunyan.</span>resolveLevel
        <span class="apidocSignatureSpan">(nameOrNum)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function resolveLevel(nameOrNum) {
    var level;
    var type = typeof (nameOrNum);
    if (type === 'string') {
        level = levelFromName[nameOrNum.toLowerCase()];
        if (!level) {
            throw new Error(format('unknown level name: "%s"', nameOrNum));
        }
    } else if (type !== 'number') {
        throw new TypeError(format('cannot resolve level: invalid arg (%s):',
            type, nameOrNum));
    } else if (nameOrNum &lt; 0 || Math.floor(nameOrNum) !== nameOrNum) {
        throw new TypeError(format('level is not a positive integer: %s',
            nameOrNum));
    } else {
        level = nameOrNum;
    }
    return level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.safeCycles" id="apidoc.element.bunyan.bunyan.safeCycles">
        function <span class="apidocSignatureSpan">bunyan.bunyan.</span>safeCycles
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function safeCyclesSet() {
    var seen = new Set();
    return function (key, val) {
        if (!val || typeof (val) !== 'object') {
            return val;
        }
        if (seen.has(val)) {
            return '[Circular]';
        }
        seen.add(val);
        return val;
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.super_" id="apidoc.element.bunyan.bunyan.super_">
        function <span class="apidocSignatureSpan">bunyan.bunyan.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.bunyan.prototype" id="apidoc.module.bunyan.bunyan.prototype">module bunyan.bunyan.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype._applySerializers" id="apidoc.element.bunyan.bunyan.prototype._applySerializers">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>_applySerializers
        <span class="apidocSignatureSpan">(fields, excludeFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_applySerializers = function (fields, excludeFields) {
    var self = this;

    xxx('_applySerializers: excludeFields', excludeFields);

    // Check each serializer against these (presuming number of serializers
    // is typically less than number of fields).
    Object.keys(this.serializers).forEach(function (name) {
        if (fields[name] === undefined ||
            (excludeFields &amp;&amp; excludeFields[name]))
        {
            return;
        }
        xxx('_applySerializers; apply to "%s" key', name)
        try {
            fields[name] = self.serializers[name](fields[name]);
        } catch (err) {
            _warn(format('bunyan: ERROR: Exception thrown from the "%s" '
                + 'Bunyan serializer. This should never happen. This is a bug '
                + 'in that serializer function.\n%s',
                name, err.stack || err));
            fields[name] = format('(Error in Bunyan log "%s" serializer '
                + 'broke field. See stderr for details.)', name);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype._emit" id="apidoc.element.bunyan.bunyan.prototype._emit">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>_emit
        <span class="apidocSignatureSpan">(rec, noemit)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_emit = function (rec, noemit) {
    var i;

    // Lazily determine if this Logger has non-'raw' streams. If there are
    // any, then we need to stringify the log record.
    if (this.haveNonRawStreams === undefined) {
        this.haveNonRawStreams = false;
        for (i = 0; i &lt; this.streams.length; i++) {
            if (!this.streams[i].raw) {
                this.haveNonRawStreams = true;
                break;
            }
        }
    }

    // Stringify the object (creates a warning str on error).
    var str;
    if (noemit || this.haveNonRawStreams) {
        str = fastAndSafeJsonStringify(rec) + '\n';
    }

    if (noemit)
        return str;

    var level = rec.level;
    for (i = 0; i &lt; this.streams.length; i++) {
        var s = this.streams[i];
        if (s.level &lt;= level) {
            xxx('writing log rec "%s" to "%s" stream (%d &lt;= %d): %j',
                rec.msg, s.type, s.level, level, rec);
            s.stream.write(s.raw ? rec : str);
        }
    };

    return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.addSerializers" id="apidoc.element.bunyan.bunyan.prototype.addSerializers">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>addSerializers
        <span class="apidocSignatureSpan">(serializers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addSerializers(serializers) {
    var self = this;

    if (!self.serializers) {
        self.serializers = {};
    }
    Object.keys(serializers).forEach(function (field) {
        var serializer = serializers[field];
        if (typeof (serializer) !== 'function') {
            throw new TypeError(format(
                'invalid serializer for "%s" field: must be a function',
                field));
        } else {
            self.serializers[field] = serializer;
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
});
```


Typically serializers are added to a logger at creation time via
`bunyan.createLogger({..., serializers: &lt;serializers&gt;})`. However, serializers
can be added after creation via `&lt;logger&gt;.<span class="apidocCodeKeywordSpan">addSerializers</span>(...)`, e.g.:

```js
var log = bunyan.createLogger({name: 'myapp'});
log.addSerializers({req: reqSerializer});
```

### Requirements for serializers functions
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.addStream" id="apidoc.element.bunyan.bunyan.prototype.addStream">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>addStream
        <span class="apidocSignatureSpan">(s, defaultLevel)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addStream(s, defaultLevel) {
    var self = this;
    if (defaultLevel === null || defaultLevel === undefined) {
        defaultLevel = INFO;
    }

    s = objCopy(s);

    // Implicit 'type' from other args.
    if (!s.type) {
        if (s.stream) {
            s.type = 'stream';
        } else if (s.path) {
            s.type = 'file'
        }
    }
    s.raw = (s.type === 'raw');  // PERF: Allow for faster check in `_emit`.

    if (s.level !== undefined) {
        s.level = resolveLevel(s.level);
    } else {
        s.level = resolveLevel(defaultLevel);
    }
    if (s.level &lt; self._level) {
        self._level = s.level;
    }

    switch (s.type) {
    case 'stream':
        assert.ok(isWritable(s.stream),
                  '"stream" stream is not writable: ' + util.inspect(s.stream));

        if (!s.closeOnExit) {
            s.closeOnExit = false;
        }
        break;
    case 'file':
        if (s.reemitErrorEvents === undefined) {
            s.reemitErrorEvents = true;
        }
        if (!s.stream) {
            s.stream = fs.createWriteStream(s.path,
                                            {flags: 'a', encoding: 'utf8'});
            if (!s.closeOnExit) {
                s.closeOnExit = true;
            }
        } else {
            if (!s.closeOnExit) {
                s.closeOnExit = false;
            }
        }
        break;
    case 'rotating-file':
        assert.ok(!s.stream,
                  '"rotating-file" stream should not give a "stream"');
        assert.ok(s.path);
        assert.ok(mv, '"rotating-file" stream type is not supported: '
                      + 'missing "mv" module');
        s.stream = new RotatingFileStream(s);
        if (!s.closeOnExit) {
            s.closeOnExit = true;
        }
        break;
    case 'raw':
        if (!s.closeOnExit) {
            s.closeOnExit = false;
        }
        break;
    default:
        throw new TypeError('unknown stream type "' + s.type + '"');
    }

    if (s.reemitErrorEvents &amp;&amp; typeof (s.stream.on) === 'function') {
        // TODO: When we have `&lt;logger&gt;.close()`, it should remove event
        //      listeners to not leak Logger instances.
        s.stream.on('error', function onStreamError(err) {
            self.emit('error', err, s);
        });
    }

    self.streams.push(s);
    delete self.haveNonRawStreams;  // reset
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

After a bunyan instance has been initialized, you may add additional streams by
calling the `addStream` function.

```js
var bunyan = require('bunyan');
var log = bunyan.createLogger('myLogger');
log.<span class="apidocCodeKeywordSpan">addStream</span>({
  name: "myNewStream",
  stream: process.stderr,
  level: "debug"
});
```

## stream errors
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.child" id="apidoc.element.bunyan.bunyan.prototype.child">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>child
        <span class="apidocSignatureSpan">(options, simple)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">child = function (options, simple) {
    return new (this.constructor)(this, options || {}, simple);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
More on streams in the [Streams section](#streams) below.

## log.child

Bunyan has a concept of a child logger to **specialize a logger for a
sub-component of your application**, i.e. to create a new logger with
additional bound fields that will be included in its log records. A child
logger is created with `log.<span class="apidocCodeKeywordSpan">child</span>(...)`.

In the following example, logging on a "Wuzzle" instance's `this.log` will
be exactly as on the parent logger with the addition of the `widget_type`
field:

```js
var bunyan = require('bunyan');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.debug" id="apidoc.element.bunyan.bunyan.prototype.debug">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>debug
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function () {
    var log = this;
    var str = null;
    var rec = null;

    if (!this._emit) {
<span class="apidocCodeCommentSpan">        /*
         * Show this invalid Bunyan usage warning *once*.
         *
         * See &lt;https://github.com/trentm/node-bunyan/issues/100&gt; for
         * an example of how this can happen.
         */
</span>        var dedupKey = 'unbound';
        if (!_haveWarned[dedupKey]) {
            var caller = getCaller3Info();
            _warn(format('bunyan usage error: %s:%s: attempt to log '
                + 'with an unbound log method: `this` is: %s',
                caller.file, caller.line, util.inspect(this)),
                dedupKey);
        }
        return;
    } else if (arguments.length === 0) {   // `log.&lt;level&gt;()`
        return (this._level &lt;= minLevel);
    }

    var msgArgs = new Array(arguments.length);
    for (var i = 0; i &lt; msgArgs.length; ++i) {
        msgArgs[i] = arguments[i];
    }

    if (this._level &lt;= minLevel) {
        rec = mkRecord(log, minLevel, msgArgs);
        str = this._emit(rec);
    }

    if (probes) {
        probes[minLevel].fire(mkProbeArgs, str, log, minLevel, msgArgs);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- `pid`: Required. Integer. Filled in automatically at Logger creation.
- `time`: Required. String. Added by Bunyan. Can be overridden.
  The date and time of the event in [ISO 8601
  Extended Format](http://en.wikipedia.org/wiki/ISO_8601) format and in UTC,
  as from
  [`Date.toISOString()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toISOString).
- `msg`: Required. String.
  Every `log.<span class="apidocCodeKeywordSpan">debug</span>(...)` et al call must provide a log message.
- `src`: Optional. Object giving log call source info. This is added
  automatically by Bunyan if the "src: true" config option is given to the
  Logger. Never use in production as this is really slow.


Go ahead and add more fields, and nested ones are fine (and recommended) as
well. This is why we're using JSON. Some suggestions and best practices
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.error" id="apidoc.element.bunyan.bunyan.prototype.error">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>error
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function () {
    var log = this;
    var str = null;
    var rec = null;

    if (!this._emit) {
<span class="apidocCodeCommentSpan">        /*
         * Show this invalid Bunyan usage warning *once*.
         *
         * See &lt;https://github.com/trentm/node-bunyan/issues/100&gt; for
         * an example of how this can happen.
         */
</span>        var dedupKey = 'unbound';
        if (!_haveWarned[dedupKey]) {
            var caller = getCaller3Info();
            _warn(format('bunyan usage error: %s:%s: attempt to log '
                + 'with an unbound log method: `this` is: %s',
                caller.file, caller.line, util.inspect(this)),
                dedupKey);
        }
        return;
    } else if (arguments.length === 0) {   // `log.&lt;level&gt;()`
        return (this._level &lt;= minLevel);
    }

    var msgArgs = new Array(arguments.length);
    for (var i = 0; i &lt; msgArgs.length; ++i) {
        msgArgs[i] = arguments[i];
    }

    if (this._level &lt;= minLevel) {
        rec = mkRecord(log, minLevel, msgArgs);
        str = this._emit(rec);
    }

    if (probes) {
        probes[minLevel].fire(mkProbeArgs, str, log, minLevel, msgArgs);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    "stack": "TypeError: boom\n    at Object.&lt;anonymous&gt; ..."
  },
  "msg": "boom",
  ...
  ```

  Or use the `bunyan.stdSerializers.err` serializer in your Logger and
  do this `log.<span class="apidocCodeKeywordSpan">error</span>({err: err}, "oops")`. See "examples/err.js".

- `req_id`: String. A request identifier. Including this field in all logging
tied to handling a particular request to your server is strongly suggested.
This allows post analysis of logs to easily collate all related logging
for a request. This really shines when you have a SOA with multiple services
and you carry a single request ID from the top API down through all APIs
(as [node-restify](https://github.com/mcavage/node-restify) facilitates
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.fatal" id="apidoc.element.bunyan.bunyan.prototype.fatal">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>fatal
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fatal = function () {
    var log = this;
    var str = null;
    var rec = null;

    if (!this._emit) {
<span class="apidocCodeCommentSpan">        /*
         * Show this invalid Bunyan usage warning *once*.
         *
         * See &lt;https://github.com/trentm/node-bunyan/issues/100&gt; for
         * an example of how this can happen.
         */
</span>        var dedupKey = 'unbound';
        if (!_haveWarned[dedupKey]) {
            var caller = getCaller3Info();
            _warn(format('bunyan usage error: %s:%s: attempt to log '
                + 'with an unbound log method: `this` is: %s',
                caller.file, caller.line, util.inspect(this)),
                dedupKey);
        }
        return;
    } else if (arguments.length === 0) {   // `log.&lt;level&gt;()`
        return (this._level &lt;= minLevel);
    }

    var msgArgs = new Array(arguments.length);
    for (var i = 0; i &lt; msgArgs.length; ++i) {
        msgArgs[i] = arguments[i];
    }

    if (this._level &lt;= minLevel) {
        rec = mkRecord(log, minLevel, msgArgs);
        str = this._emit(rec);
    }

    if (probes) {
        probes[minLevel].fire(mkProbeArgs, str, log, minLevel, msgArgs);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.info" id="apidoc.element.bunyan.bunyan.prototype.info">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>info
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function () {
    var log = this;
    var str = null;
    var rec = null;

    if (!this._emit) {
<span class="apidocCodeCommentSpan">        /*
         * Show this invalid Bunyan usage warning *once*.
         *
         * See &lt;https://github.com/trentm/node-bunyan/issues/100&gt; for
         * an example of how this can happen.
         */
</span>        var dedupKey = 'unbound';
        if (!_haveWarned[dedupKey]) {
            var caller = getCaller3Info();
            _warn(format('bunyan usage error: %s:%s: attempt to log '
                + 'with an unbound log method: `this` is: %s',
                caller.file, caller.line, util.inspect(this)),
                dedupKey);
        }
        return;
    } else if (arguments.length === 0) {   // `log.&lt;level&gt;()`
        return (this._level &lt;= minLevel);
    }

    var msgArgs = new Array(arguments.length);
    for (var i = 0; i &lt; msgArgs.length; ++i) {
        msgArgs[i] = arguments[i];
    }

    if (this._level &lt;= minLevel) {
        rec = mkRecord(log, minLevel, msgArgs);
        str = this._emit(rec);
    }

    if (probes) {
        probes[minLevel].fire(mkProbeArgs, str, log, minLevel, msgArgs);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[![Build Status](https://travis-ci.org/trentm/node-bunyan.svg?branch=master)](https://travis-ci.org/trentm/node-bunyan)

Bunyan is **a simple and fast JSON logging library** for node.js services:

```js
var bunyan = require('bunyan');
var log = bunyan.createLogger({name: "myapp"});
log.<span class="apidocCodeKeywordSpan">info</span>("hi");
```

and **a `bunyan` CLI tool** for nicely viewing those logs:

![bunyan CLI screenshot](https://raw.github.com/trentm/node-bunyan/master/tools/screenshot1.png)

Manifesto: Server logs should be structured. JSON's a good format. Let's do
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.level" id="apidoc.element.bunyan.bunyan.prototype.level">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>level
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function level(value) {
    if (value === undefined) {
        return this._level;
    }
    var newLevel = resolveLevel(value);
    var len = this.streams.length;
    for (var i = 0; i &lt; len; i++) {
        this.streams[i].level = newLevel;
    }
    this._level = newLevel;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Setting a logger instance (or one of its streams) to a particular level implies
that all log records *at that level and above* are logged. E.g. a logger set to
level "info" will log records at level info and above (warn, error, fatal).

While using log level *names* is preferred, the actual level values are integers
internally (10 for "trace", ..., 60 for "fatal"). Constants are defined for
the levels: `bunyan.TRACE` ... `bunyan.FATAL`. The lowercase level names are
aliases supported in the API, e.g. `log.<span class="apidocCodeKeywordSpan">level</span>("info")`. There is one exception
:
DTrace integration uses the level names. The fired DTrace probes are named
'bunyan-$levelName'.

Here is the API for querying and changing levels on an existing logger.
Recall that a logger instance has an array of output "streams":

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.levels" id="apidoc.element.bunyan.bunyan.prototype.levels">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>levels
        <span class="apidocSignatureSpan">(name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function levels(name, value) {
    if (name === undefined) {
        assert.equal(value, undefined);
        return this.streams.map(
            function (s) { return s.level });
    }
    var stream;
    if (typeof (name) === 'number') {
        stream = this.streams[name];
        if (stream === undefined) {
            throw new Error('invalid stream index: ' + name);
        }
    } else {
        var len = this.streams.length;
        for (var i = 0; i &lt; len; i++) {
            var s = this.streams[i];
            if (s.name === name) {
                stream = s;
                break;
            }
        }
        if (!stream) {
            throw new Error(format('no stream with name "%s"', name));
        }
    }
    if (value === undefined) {
        return stream.level;
    } else {
        var newLevel = resolveLevel(value);
        stream.level = newLevel;
        if (newLevel &lt; this._level) {
            this._level = newLevel;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
log.level() -&gt; INFO   // gets current level (lowest level of all streams)

log.level(INFO)       // set all streams to level INFO
log.level("info")     // set all streams to level INFO

log.<span class="apidocCodeKeywordSpan">levels</span>() -&gt; [DEBUG, INFO]   // get array of levels of all streams
log.levels(0) -&gt; DEBUG          // get level of stream at index 0
log.levels("foo")               // get level of stream with name "foo"

log.levels(0, INFO)             // set level of stream 0 to INFO
log.levels(0, "info")           // can use "info" et al aliases
log.levels("foo", WARN)         // set stream named "foo" to WARN
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.reopenFileStreams" id="apidoc.element.bunyan.bunyan.prototype.reopenFileStreams">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>reopenFileStreams
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reopenFileStreams = function () {
    var self = this;
    self.streams.forEach(function (s) {
        if (s.type === 'file') {
            if (s.stream) {
                // Not sure if typically would want this, or more immediate
                // `s.stream.destroy()`.
                s.stream.end();
                s.stream.destroySoon();
                delete s.stream;
            }
            s.stream = fs.createWriteStream(s.path,
                {flags: 'a', encoding: 'utf8'});
            s.stream.on('error', function (err) {
                self.emit('error', err, s);
            });
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
You can tell bunyan to reopen the file stream with code like this in your
app:

```js
var log = bunyan.createLogger(...);
...
process.on('SIGUSR2', function () {
    log.<span class="apidocCodeKeywordSpan">reopenFileStreams</span>();
});
```

where you'd configure your log rotation to send SIGUSR2 (or some other signal)
to your process. Any other mechanism to signal your app to run
`log.reopenFileStreams()` would work as well.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.trace" id="apidoc.element.bunyan.bunyan.prototype.trace">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>trace
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trace = function () {
    var log = this;
    var str = null;
    var rec = null;

    if (!this._emit) {
<span class="apidocCodeCommentSpan">        /*
         * Show this invalid Bunyan usage warning *once*.
         *
         * See &lt;https://github.com/trentm/node-bunyan/issues/100&gt; for
         * an example of how this can happen.
         */
</span>        var dedupKey = 'unbound';
        if (!_haveWarned[dedupKey]) {
            var caller = getCaller3Info();
            _warn(format('bunyan usage error: %s:%s: attempt to log '
                + 'with an unbound log method: `this` is: %s',
                caller.file, caller.line, util.inspect(this)),
                dedupKey);
        }
        return;
    } else if (arguments.length === 0) {   // `log.&lt;level&gt;()`
        return (this._level &lt;= minLevel);
    }

    var msgArgs = new Array(arguments.length);
    for (var i = 0; i &lt; msgArgs.length; ++i) {
        msgArgs[i] = arguments[i];
    }

    if (this._level &lt;= minLevel) {
        rec = mkRecord(log, minLevel, msgArgs);
        str = this._emit(rec);
    }

    if (probes) {
        probes[minLevel].fire(mkProbeArgs, str, log, minLevel, msgArgs);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ```

2. An example script using Bunyan, "play.js":

    ```js
    var bunyan = require('bunyan');
    var log = bunyan.createLogger({name: 'play', level: 'debug'});
    log.<span class="apidocCodeKeywordSpan">trace</span>('this one does not emit');
    log.debug('hi on debug');   // console.log
    log.info('hi on info');     // console.info
    log.warn('hi on warn');     // console.warn
    log.error('hi on error');   // console.error
    ```

3. Build this into a bundle to run in the browser, "play.browser.js":
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.bunyan.prototype.warn" id="apidoc.element.bunyan.bunyan.prototype.warn">
        function <span class="apidocSignatureSpan">bunyan.bunyan.prototype.</span>warn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function () {
    var log = this;
    var str = null;
    var rec = null;

    if (!this._emit) {
<span class="apidocCodeCommentSpan">        /*
         * Show this invalid Bunyan usage warning *once*.
         *
         * See &lt;https://github.com/trentm/node-bunyan/issues/100&gt; for
         * an example of how this can happen.
         */
</span>        var dedupKey = 'unbound';
        if (!_haveWarned[dedupKey]) {
            var caller = getCaller3Info();
            _warn(format('bunyan usage error: %s:%s: attempt to log '
                + 'with an unbound log method: `this` is: %s',
                caller.file, caller.line, util.inspect(this)),
                dedupKey);
        }
        return;
    } else if (arguments.length === 0) {   // `log.&lt;level&gt;()`
        return (this._level &lt;= minLevel);
    }

    var msgArgs = new Array(arguments.length);
    for (var i = 0; i &lt; msgArgs.length; ++i) {
        msgArgs[i] = arguments[i];
    }

    if (this._level &lt;= minLevel) {
        rec = mkRecord(log, minLevel, msgArgs);
        str = this._emit(rec);
    }

    if (probes) {
        probes[minLevel].fire(mkProbeArgs, str, log, minLevel, msgArgs);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
named after the logging levels:

```js
// hi.js
var bunyan = require('bunyan');
var log = bunyan.createLogger({name: 'myapp'});
log.info('hi');
log.<span class="apidocCodeKeywordSpan">warn</span>({lang: 'fr'}, 'au revoir');
```

All loggers must provide a "name". This is somewhat akin to the log4j logger
"name", but Bunyan doesn't do hierarchical logger names.

**Bunyan log records are JSON.** A few fields are added automatically:
"pid", "hostname", "time" and "v".
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.bunyan.stdSerializers" id="apidoc.module.bunyan.stdSerializers">module bunyan.stdSerializers</a></h1>


    <h2>
        <a href="#apidoc.element.bunyan.stdSerializers.err" id="apidoc.element.bunyan.stdSerializers.err">
        function <span class="apidocSignatureSpan">bunyan.stdSerializers.</span>err
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">err = function (err) {
    if (!err || !err.stack)
        return err;
    var obj = {
        message: err.message,
        name: err.name,
        stack: getFullErrorStack(err),
        code: err.code,
        signal: err.signal
    }
    return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.stdSerializers.req" id="apidoc.element.bunyan.stdSerializers.req">
        function <span class="apidocSignatureSpan">bunyan.stdSerializers.</span>req
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">req = function (req) {
    if (!req || !req.connection)
        return req;
    return {
        method: req.method,
        url: req.url,
        headers: req.headers,
        remoteAddress: req.connection.remoteAddress,
        remotePort: req.connection.remotePort
    };
    // Trailers: Skipping for speed. If you need trailers in your app, then
    // make a custom serializer.
    //if (Object.keys(trailers).length &gt; 0) {
    //  obj.trailers = req.trailers;
    //}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.bunyan.stdSerializers.res" id="apidoc.element.bunyan.stdSerializers.res">
        function <span class="apidocSignatureSpan">bunyan.stdSerializers.</span>res
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">res = function (res) {
    if (!res || !res.statusCode)
        return res;
    return {
        statusCode: res.statusCode,
        header: res._header
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>